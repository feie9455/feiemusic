play=!1;musiclist=[];musicfilelist=[];nowmusic=0;
function startstop(){play?(play=!1,$("#playicon").removeClass("fas fa-pause"),$("#playicon").addClass("fas fa-play"),$("#player")[0].pause()):(play=!0,$("#playicon").removeClass("fas fa-play"),$("#playicon").addClass("fas fa-pause"),$("#player")[0].src||URL.createObjectURL(musicfilelist[nowmusic]),$("#player")[0].play(),setTimeout(function(){document.getElementById("len").max=Math.floor(document.getElementById("player").duration);document.getElementById("len").value=Math.floor(document.getElementById("player").currentTime)},
200),setInterval(function(){refrush()},1E3))}function _padZero(a){var c=a.num,b=void 0===a.length?2:a.length;a=void 0===a.position?"left":a.position;var d=c.toString().length;if("left"===a)for(;d<b;)c="0"+c,d++;else if("right"===a)for(;d<b;)c+="0",d++;return c}function forward(){document.getElementById("player").currentTime=document.getElementById("player").currentTime+10;refrush()}
function backward(){10<=document.getElementById("player").currentTime?document.getElementById("player").currentTime=document.getElementById("player").currentTime-10:document.getElementById("player").currentTime=0;refrush()}function gforward(){musicfilelist.length-1>=nowmusic+1?(url=URL.createObjectURL(musicfilelist[nowmusic+1]),nowmusic+=1):(url=URL.createObjectURL(musicfilelist[0]),nowmusic=0);document.getElementById("player").src=url;play=!1;startstop();refrush()}
function gbackward(){1<=nowmusic?(url=URL.createObjectURL(musicfilelist[nowmusic-1]),--nowmusic):(url=URL.createObjectURL(musicfilelist[musicfilelist.length-1]),nowmusic=musicfilelist.length-1);document.getElementById("player").src=url;play=!1;startstop();refrush()}
function refrush(){document.getElementById("len").value=Math.floor(document.getElementById("player").currentTime);document.getElementById("nowtime").innerHTML=String(Math.floor(document.getElementById("player").currentTime/60))+":"+String(_padZero({num:Math.floor(document.getElementById("player").currentTime)%60}));document.title=document.getElementById("title").innerHTML=musiclist[nowmusic];document.getElementById("player").currentTime==document.getElementById("player").duration&&next()}
function next(){gforward()}function bgp(){$("#file").trigger("click")}function getFilePath(){$("body").css("background-image",URL.createObjectURL(document.getElementById("file").files[0]));document.body.background=URL.createObjectURL(document.getElementById("file").files[0])}
window.onload=function(){var a=document.getElementById("drag");a.onmousedown=function(c){"undefined"!==typeof a.setCapture&&a.setCapture();document.onmousemove=function(b){b=b||window.event;$("#main").css("top",b.pageY-24);$("#main").css("left",b.pageX-360)};document.onmouseup=function(b){this.onmouseup=this.onmousemove=null;"undefined"!=typeof a.releaseCapture&&a.releaseCapture()}}};